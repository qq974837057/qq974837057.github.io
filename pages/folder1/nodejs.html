<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>node.js | 元气Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/wind.png">
    <meta name="description" content="元气Joe的前端世界">
    
    <link rel="preload" href="/assets/css/0.styles.8a46e3d7.css" as="style"><link rel="preload" href="/assets/js/app.d50c72b0.js" as="script"><link rel="preload" href="/assets/js/2.7285e602.js" as="script"><link rel="preload" href="/assets/js/22.3385e6bf.js" as="script"><link rel="prefetch" href="/assets/js/10.95e645d2.js"><link rel="prefetch" href="/assets/js/11.7a5bbaab.js"><link rel="prefetch" href="/assets/js/12.0bd756fe.js"><link rel="prefetch" href="/assets/js/13.c032609a.js"><link rel="prefetch" href="/assets/js/14.621e82f0.js"><link rel="prefetch" href="/assets/js/15.2bc7bb03.js"><link rel="prefetch" href="/assets/js/16.7b7424df.js"><link rel="prefetch" href="/assets/js/17.9a2f808e.js"><link rel="prefetch" href="/assets/js/18.2bb036cb.js"><link rel="prefetch" href="/assets/js/19.d8537971.js"><link rel="prefetch" href="/assets/js/20.c8e9e8fe.js"><link rel="prefetch" href="/assets/js/21.efec8fa1.js"><link rel="prefetch" href="/assets/js/23.a260f1cf.js"><link rel="prefetch" href="/assets/js/24.69037aca.js"><link rel="prefetch" href="/assets/js/25.ebc4667f.js"><link rel="prefetch" href="/assets/js/26.d355b386.js"><link rel="prefetch" href="/assets/js/27.8c327e12.js"><link rel="prefetch" href="/assets/js/28.98128502.js"><link rel="prefetch" href="/assets/js/29.b35b9692.js"><link rel="prefetch" href="/assets/js/3.efa71162.js"><link rel="prefetch" href="/assets/js/30.d28a8fd7.js"><link rel="prefetch" href="/assets/js/31.2eab1cab.js"><link rel="prefetch" href="/assets/js/32.0acbefde.js"><link rel="prefetch" href="/assets/js/33.35108fd8.js"><link rel="prefetch" href="/assets/js/34.bd1353df.js"><link rel="prefetch" href="/assets/js/4.2ab80d3e.js"><link rel="prefetch" href="/assets/js/5.b6c9c262.js"><link rel="prefetch" href="/assets/js/6.d1cbcbdc.js"><link rel="prefetch" href="/assets/js/7.7f87f0fb.js"><link rel="prefetch" href="/assets/js/8.97df5136.js"><link rel="prefetch" href="/assets/js/9.80311f25.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8a46e3d7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/wind.png" alt="元气Blog" class="logo"> <span class="site-name can-hide">元气Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/folder1/html.html" class="nav-link">
  文章
</a></li><li class="dropdown-item"><!----> <a href="/pages/folder2/test4.html" class="nav-link">
  随笔
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/qq974837057" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/folder1/html.html" class="nav-link">
  文章
</a></li><li class="dropdown-item"><!----> <a href="/pages/folder2/test4.html" class="nav-link">
  随笔
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/qq974837057" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/folder1/html.html" class="sidebar-link">HTML</a></li><li><a href="/pages/folder1/css.html" class="sidebar-link">CSS</a></li><li><a href="/pages/folder1/js.html" class="sidebar-link">JS</a></li><li><a href="/pages/folder1/ts.html" class="sidebar-link">TS</a></li><li><a href="/pages/folder1/browser.html" class="sidebar-link">HTTP与浏览器</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/folder1/security.html" class="sidebar-link">前端安全</a></li><li><a href="/pages/folder1/monitor.html" class="sidebar-link">监控体系</a></li><li><a href="/pages/folder1/performance.html" class="sidebar-link">性能优化</a></li><li><a href="/pages/folder1/design-pattern.html" class="sidebar-link">设计模式和架构</a></li><li><a href="/pages/folder1/refactor.html" class="sidebar-link">代码重构之道</a></li><li><a href="/pages/folder1/nodejs.html" aria-current="page" class="active sidebar-link">node与前沿</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#node-js" class="sidebar-link">node.js</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#文件路径和-path-api" class="sidebar-link">文件路径和 path API</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#文件读取" class="sidebar-link">文件读取</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#url-模块" class="sidebar-link">url 模块</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#http-模块" class="sidebar-link">http 模块</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#web-框架的几个层次" class="sidebar-link">web 框架的几个层次</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#中间件和洋葱圈模型-express-和-koa" class="sidebar-link">中间件和洋葱圈模型（Express 和 Koa）</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#内存泄漏" class="sidebar-link">内存泄漏</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#跨域设置" class="sidebar-link">跨域设置</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#前沿" class="sidebar-link">前沿</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#service-worker" class="sidebar-link">service worker</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#pwa-渐进式网页应用" class="sidebar-link">PWA：渐进式网页应用</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#微前端" class="sidebar-link">微前端</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#web-component" class="sidebar-link">web component</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#serverless" class="sidebar-link">Serverless</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#vue3-0" class="sidebar-link">Vue3.0</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#flutter-谷歌-可跨平台开发-移动端、web、pc" class="sidebar-link">Flutter 谷歌 可跨平台开发（移动端、web、PC）</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#deno" class="sidebar-link">Deno</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#构建知识体系" class="sidebar-link">构建知识体系</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/nodejs.html#其他" class="sidebar-link">其他</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/folder1/frame-common.html" class="sidebar-link">框架通识</a></li><li><a href="/pages/folder1/frame.html" class="sidebar-link">框架-Vue</a></li><li><a href="/pages/folder1/react.html" class="sidebar-link">框架-React</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工程化和协作</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/folder1/webpack.html" class="sidebar-link">Webpack</a></li><li><a href="/pages/folder1/normalize.html" class="sidebar-link">前端规范</a></li><li><a href="/pages/folder1/git.html" class="sidebar-link">Git</a></li><li><a href="/pages/folder1/build.html" class="sidebar-link">构建</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>算法与编程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/folder1/algorithm-data.html" class="sidebar-link">数据结构和算法-概念</a></li><li><a href="/pages/folder1/algorithm-sort.html" class="sidebar-link">数据结构和算法-排序专题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="node-js"><a href="#node-js" class="header-anchor">#</a> node.js</h2> <h3 id="文件路径和-path-api"><a href="#文件路径和-path-api" class="header-anchor">#</a> 文件路径和 path API</h3> <ul><li>文件路径
<ul><li><code>__dirname</code> : 总是返回被执行的 js 所在文件夹的绝对路径</li> <li><code>__filename</code>: 总是返回被执行的 js 的绝对路径</li> <li><code>process.cwd()</code>: 总是返回运行 node 命令时所在的文件夹的绝对路径</li></ul></li> <li>path API
<ul><li><code>path.dirname()</code>： 返回 path 的目录名</li> <li><code>path.join()</code>：所有给定的 path 片段连接到一起，会去除干扰的.</li> <li><code>path.resolve()</code>：方法会将路径或路径片段的序列解析为相对于当前目录的绝对路径，相当于 cd 命令</li></ul></li></ul> <h3 id="文件读取"><a href="#文件读取" class="header-anchor">#</a> 文件读取</h3> <ul><li>fs 模块
<ul><li><code>const fs = require('fs')</code> 载入 fs 模块</li> <li>fs 模块中所有方法都有同步和异步两种形式</li> <li>readFileSync</li> <li>writeFileSync</li> <li>copyFileSync</li></ul></li> <li>fs-extra 模块
<ul><li>继承了 fs 模块的 API</li> <li>支持 promise</li></ul></li></ul> <h3 id="url-模块"><a href="#url-模块" class="header-anchor">#</a> url 模块</h3> <ul><li><code>url.parse</code>：将一个 url 的字符串解析为一个 url 的对象</li> <li><code>url.format</code>:将传入的 url 对象格式化为一个 url 字符串</li></ul> <h3 id="http-模块"><a href="#http-模块" class="header-anchor">#</a> http 模块</h3> <ul><li>http 模块的使用<code>const http = require('http');const server = http.createServer(function(req,res){...}); server.listen(3000)</code></li> <li>express = http 模块 + 中间件 + 路由</li></ul> <h3 id="web-框架的几个层次"><a href="#web-框架的几个层次" class="header-anchor">#</a> web 框架的几个层次</h3> <ul><li>web 框架都是基于 http、https 模块，但它提供的 api 过于原始，使用起来比较麻烦</li> <li>所以我们一般会用 express、koa 这类框架来简化，它提供了中间件机制来复用逻辑，提供了更多的 request、response 的 api</li> <li>对于企业级的复杂应用，还是会用 nestjs、eggjs 这类 MVC 框架，它们的底层是 express、koa，还提供了 Module、Controller、Service 等概念，可以很好的组织复杂的代码</li></ul> <h3 id="中间件和洋葱圈模型-express-和-koa"><a href="#中间件和洋葱圈模型-express-和-koa" class="header-anchor">#</a> 中间件和洋葱圈模型（Express 和 Koa）</h3> <p><img src="/assets/img/middleware-eggjs.8d30a4ff.png" alt=""></p> <ul><li><p>洋葱内的每一层都表示一个独立的中间件，用于实现不同的功能，比如异常处理、缓存处理等。</p></li> <li><p>每次请求都会从左侧开始一层层地经过每层的中间件，当进入到最里层的中间件之后，就会从最里层的中间件开始逐层返回。</p></li> <li><p>因此对于每层的中间件来说，在一个 请求和响应 周期中，都有两个时机点来添加不同的处理逻辑。</p></li> <li><p>洋葱圈模型的应用：koa2、umi-request</p></li> <li><p>中间件一般是通用的功能代码，与业务代码无关，比如设置响应时间、设置统一的响应内容</p></li> <li><p>express 是 next 机制</p></li> <li><p>示例代码：获取执行耗费的时间，前置处理器和后置处理器分别放到 await next() 语句的前后来完成。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Koa <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;koa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> start <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> ms <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ctx<span class="token punctuation">.</span>method<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ctx<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ms<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ms</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="内存泄漏"><a href="#内存泄漏" class="header-anchor">#</a> 内存泄漏</h3> <ul><li>同 V8 的内存泄漏处理</li> <li>检测工具
<ul><li>node-heapdump 获取内存快照对比</li> <li>Easy-Monitor 可视化内存泄漏检查工具</li></ul></li></ul> <h3 id="跨域设置"><a href="#跨域设置" class="header-anchor">#</a> 跨域设置</h3> <ul><li>设置 CORS 的 header 即可<code>res.header(&quot;Access-Control-Allow-xx&quot;,&quot;xx&quot;);</code></li></ul> <h2 id="前沿"><a href="#前沿" class="header-anchor">#</a> 前沿</h2> <ul><li><a href="https://mp.weixin.qq.com/s/b7PlbHZS6EY5kGpALpzMLA" target="_blank" rel="noopener noreferrer">2020 大前端发展<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="service-worker"><a href="#service-worker" class="header-anchor">#</a> service worker</h3> <ul><li><p>参考[https://mp.weixin.qq.com/s/vI2bxaFsFSB5rGC4Bkr8vQ]</p></li> <li><p>概念</p> <ul><li>service worker 也是一种 web worker，额外拥有持久离线缓存的能力。</li> <li>宿主环境会提供单独的线程来执行其脚本，解决 js 中耗时间的运算过程带来的性能问题。</li> <li>可以在缓存面板里查到对应的缓存</li></ul></li> <li><p>特点</p> <ul><li>sw 监听 fetch 事件 拦截代理请求和返回，用 cacheStorage 缓存文件</li> <li>独立于 JS 引擎的线程，在后台运行，不影响页面渲染</li> <li>被 install 后永远存在，除非手动卸载 unregister()</li> <li>不能访问 window 和 dom</li> <li>需要 https 才能使用</li></ul></li> <li><p>过程</p> <ul><li>注册<code>navigator.serviceWorker.register('./sw.js');</code></li> <li>安装 install</li> <li>激活 activate</li> <li>监听 fetch 事件</li></ul></li> <li><p>谷歌出的工具 Workbox</p> <ul><li>几种缓存策略
<ul><li>staleWhileRevalidate（安全可靠，一般用于静态资源）：有对应的 Cache 缓存结果就直接返回，在返回 Cache 缓存结果的同时会在后台发起网络请求拿到请求结果并更新 Cache 缓存</li> <li>networkFirst（一般用于 html）：优先尝试拿到网络请求的返回结果，如果拿到网络请求的结果，就将结果返回给客户端并且写入 Cache 缓存。如果网络请求失败，那最后被缓存的 Cache 缓存结果就会被返回到客户端</li> <li>cacheFirst（一般用于图片）：直接从 Cache 缓存中取得结果，如果 Cache 缓存中没有结果，那就会发起网络请求，拿到网络请求结果并将结果更新至 Cache 缓存</li> <li>networkOnly： 强制正常网络请求</li> <li>cacheOnly： 强制使用 cache 缓存</li></ul></li> <li>Workbox 原理
<ul><li>通过 proxy 对全局对象 workbox 代理，如果找不到对应的模块，通过 importScripts 主动加载</li></ul></li></ul></li> <li><p>兼容性</p> <ul><li>除了 IE，支持度挺高</li></ul></li></ul> <h3 id="pwa-渐进式网页应用"><a href="#pwa-渐进式网页应用" class="header-anchor">#</a> PWA：渐进式网页应用</h3> <ul><li>使用多种技术来增强 web app 的功能，能够模拟一些原生功能，比如通知推送。</li> <li>PWA 仍然是网站，基于 Service worker，只是在缓存、通知、后台功能等方面表现更
好，让网页应用呈现和原生应用相似的体验。</li> <li>PWA: 开发成本低，加载速度快</li> <li>原生：更强的计算能力，更可靠安全</li></ul> <h3 id="微前端"><a href="#微前端" class="header-anchor">#</a> 微前端</h3> <ul><li>基于<a href="https://single-spa.js.org/" target="_blank" rel="noopener noreferrer">single-spa<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><a href="https://alili.tech/archive/11052bf4/" target="_blank" rel="noopener noreferrer">教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.im/post/5d2ee768f265da1bd605da09#heading-3" target="_blank" rel="noopener noreferrer">蚂蚁金服<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>结合 MPA 和 SPA 的优势，即保证应用具备独立开发权，又可以整合到一起保证产品完整的流程体验。为了解决前端协同开发问题，包括巨石应用分离和时间延续带来的升级维护问题。</li> <li>统一管理，入口统一，内容自定</li> <li>好处：
<ul><li>复杂度：避免代码庞大，编译过慢，复杂度低，便于维护</li> <li>独立部署：项目可独立部署</li> <li>技术灵活:兼容多技术栈，跳转不需要刷新页面</li> <li>可扩展：项目模块化可扩展，按需加载，性能更好</li></ul></li> <li>缺点：
<ul><li>子应用要确保隔离性、安全性</li> <li>不应该侵入 子应用的开发、构建、发布流程</li></ul></li> <li>社区知名有阿里的乾坤
<ul><li>基于 SingleSPA，子应用提供加载和卸载的生命周期方法</li> <li>需要做 CSS 样式隔离和 JS 的沙箱(全局变量、事件处理)、父子应用的通讯</li></ul></li> <li>公司应用场景：主应用合并子应用：包括中控配网平台（分 sit 和 pro）、运营平台（文章发布、广告管理）、插件管理平台</li></ul> <h3 id="web-component"><a href="#web-component" class="header-anchor">#</a> web component</h3> <ul><li><p>参考[https://mp.weixin.qq.com/s/h8B1YxqOKtwr5CpNSYm_2A]</p></li> <li><p>前言</p> <ul><li>前端框架基于原生，提供更高的效率，更好的差异抹平。但是带来的是性能的下降（对比原生操作部分情况）和框架之间环境的隔离</li> <li>比如组件化思想，本质上是原生未直接提供对应的方式和 API，框架才需要构建一层体系来实现</li></ul></li> <li><p>web component</p> <ul><li>浏览器提供的原生 API 和模板，可以实现原生组件化，为了解决代码复用、组件自定义等问题</li> <li>开发者可以在不使用的框架的前提下进行组件化开发，而且开发出的组件可以无缝嵌入使用了框架的项目中</li> <li>vue3.2 中，也初步引入了对于 web component 的使用</li></ul></li> <li><p>组成部分</p> <ul><li>自定义元素：使用 api 开发自定义元素，包含生命周期和属性监听，<code>api：customElements.define</code></li> <li>Shadow DOM：用于隔离样式和脚本，api：<code>attachShadow</code></li> <li>HTML 模板：通过 template、slot 标签实现内容分发，包裹的内容不会显示，但可以被 js 引用，用于复用元素</li></ul></li> <li><p>兼容性</p> <ul><li>IE 完全不支持，其他支持性一般</li></ul></li></ul> <h3 id="serverless"><a href="#serverless" class="header-anchor">#</a> Serverless</h3> <ul><li><p><a href="https://mp.weixin.qq.com/s/J2fHm_mR7UE65q1vSQ9xpA" target="_blank" rel="noopener noreferrer">字节跳动参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>希望的效果</p> <ul><li>基础能力的平台化，提供更友好的开发体验</li> <li>传统前端 + 框架能力 + 平台能力 = 全栈前端。只需要关注功能开发、和部署的简单配置</li></ul></li> <li><p>基础能力的平台化</p> <ul><li>CI、CD 服务编排（编译、代码检查、灰度验证、性能检查）</li> <li>部署能力（SPA、MPA、微前端、CDN）</li> <li>灰度能力（百分比、人群、客户端版本）</li> <li>监控运维（业务指标、日志、报警）</li> <li>系统集成（研发工作台、发布系统）</li></ul></li></ul> <h3 id="vue3-0"><a href="#vue3-0" class="header-anchor">#</a> Vue3.0</h3> <ul><li>（基于函数组合）composition-api 抽逻辑，做可复用组件，同个逻辑组织在一块，更好维护-</li> <li>（基于 vue2 的 option）所有 methods、computed、data、props 聚在一起，组件变大时候，很多联合关注点，用 mixin 了，可能导致命名空间冲突。</li> <li>碎片：解除一个根节点的限制</li> <li>teleport：-类似 react 的 portal</li> <li>suspense</li> <li>tree-shaking（） 20 多 kb 的 runtime 打包</li> <li>ts：用不用 ts 都可以，用 js 也可看到 api 的参数提示</li> <li>vuex@next</li> <li>vue-router@next</li> <li>2.7 最后一个 2.x</li> <li>稳定且切换成本高，不需要新功能的话，可以不用升级</li> <li>proxy 性能更好</li></ul> <h3 id="flutter-谷歌-可跨平台开发-移动端、web、pc"><a href="#flutter-谷歌-可跨平台开发-移动端、web、pc" class="header-anchor">#</a> Flutter 谷歌 可跨平台开发（移动端、web、PC）</h3> <ul><li>优点
<ul><li>开源免费</li> <li>热重载，实时查看效果</li> <li>自定义组装</li> <li>缩进开发周期和成本</li> <li>适合 App 原型开发</li></ul></li> <li>缺点
<ul><li>应用体积更大（hello world 应用都要 7mb）</li> <li>需要 Dart 语言编程，并没那么流行</li></ul></li></ul> <h3 id="deno"><a href="#deno" class="header-anchor">#</a> Deno</h3> <ul><li><a href="https://mp.weixin.qq.com/s?__biz=MzUxMzcxMzE5Ng==&amp;mid=2247494712&amp;idx=1&amp;sn=9864ab7a7e86c10a5e503cdf1c447469&amp;chksm=f952597bce25d06da0b23aff36d2db7847903ac34e6cdc8f97a47ad3f71c93f69bdaeaf723bc&amp;mpshare=1&amp;scene=1&amp;srcid=0514iBBWWstWdIV6rACwfnbx&amp;sharer_sharetime=1589460187316&amp;sharer_shareid=f72feefcc9c2c137677aa7f49d02e0f4&amp;key=ccdbd9bf2470f177f1778e8a536c75fa6ff0f4f9b4c018199c7ae9c39d9a59b26df87afc2538e03550e23af2e85e15d5a7a1af90c135f520a33283dd458dc86d40fbd5b642b95e4b53b6b8deca22ff71&amp;ascene=1&amp;uin=MjI1NjQ0MTU1&amp;devicetype=Windows+10&amp;version=62080079&amp;lang=zh_CN&amp;exportkey=AU6tiwanRNaXKDr8T%2F9oryw%3D&amp;pass_ticket=jc2jFsb7uCiKjVYhP4G1wr338fKnSOS%2FPJb3BVzXbVQ%3D" target="_blank" rel="noopener noreferrer">Deno1.0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>好处
<ul><li>支持 TypeScript</li> <li>Deno 所有回调都是来自 promise 的</li></ul></li> <li>目前局限
<ul><li>缺乏与现有 JavaScript 工具的兼容，比如不兼容 npm</li> <li>http 性能（每秒 2w+请求）比 node 差（每秒 3w+请求）</li></ul></li></ul></li></ul> <h2 id="构建知识体系"><a href="#构建知识体系" class="header-anchor">#</a> 构建知识体系</h2> <ul><li>如何构建：将散乱的知识点进行连接，分模块组织好</li> <li>需要具备：完备性和逻辑关系（如面向对象和原型、作用域链和闭包）</li> <li>三个能力：
<ul><li>编程能力：数据结构+算法+语言表达</li> <li>架构能力：抽象（降低复杂性）、封装（屏蔽复杂性或细节）、解耦（降低依赖性）、复用（提高效率）</li> <li>工程能力：工具链、发布系统（如 eslint、监控体系、持续集成）</li></ul></li></ul> <h2 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h2> <ul><li><p>npm 版本号</p> <ul><li>X.Y.Z(主版本.次要版本.补丁版本)
<ul><li>X:有不兼容的 API</li> <li>Y:向后兼容的功能变化</li> <li>Z:向后兼容的 bug fix</li></ul></li> <li>连字符-
<ul><li>1.2.3 - 2.3.4 等价于 &gt;=1.2.3 &lt;=2.3.4</li> <li>1.2.3 - 2 等价于 &gt;=1.2.3 ❤️.0.0</li></ul></li> <li>波浪线~(推荐)
<ul><li>次要版本不增加</li> <li>~1.2.3 等价于 &gt;=1.2.3 &lt;1.3.0</li> <li>~1.2 等价于 &gt;=1.2.0 &lt;1.3.0 (Same as 1.2.x)</li> <li>~0.2.3 等价于 &gt;=0.2.3 &lt;0.3.0</li> <li>~0.2 等价于 &gt;=0.2.0 &lt;0.3.0 (Same as 0.2.x)</li> <li>特殊情况</li> <li>~1 等价于 &gt;=1.0.0 &lt;2.0.0 (Same as 1.x)</li> <li>~0 等价于 &gt;=0.0.0 &lt;1.0.0 (Same as 0.x)</li></ul></li> <li>脱字符^
<ul><li>指定从左面起第一个非零位置的范围，以它为基准不变，后面小版本可变。</li> <li>^1.2.3 等价于 &gt;=1.2.3 &lt;2.0.0</li> <li>^0.2.3 等价于 &gt;=0.2.3 &lt;0.3.0</li> <li>^0.0.3 等价于 &gt;=0.0.3 &lt;0.0.4，即等价于 0.0.3</li></ul></li></ul></li> <li><p>抓包工具：</p> <ul><li>Fiddler 4</li> <li>Charles</li></ul></li> <li><p>Node 版本：</p> <ul><li>Node.js 14.5.0 2020-06-30</li> <li>Node.js 11.0.0 2018-10-23</li> <li>node10 和 node11 事件循环有差异。</li></ul></li></ul> <div class="language- extra-class"><pre class="language-text"><code>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/pages/folder1/refactor.html" class="prev">
        代码重构之道
      </a></span> <span class="next"><a href="/pages/folder1/frame-common.html">
        框架通识
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d50c72b0.js" defer></script><script src="/assets/js/2.7285e602.js" defer></script><script src="/assets/js/22.3385e6bf.js" defer></script>
  </body>
</html>
