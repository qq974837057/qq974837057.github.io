<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>元气Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/wind.png">
    <meta name="description" content="元气Joe的前端世界">
    
    <link rel="preload" href="/assets/css/0.styles.8a46e3d7.css" as="style"><link rel="preload" href="/assets/js/app.d50c72b0.js" as="script"><link rel="preload" href="/assets/js/2.7285e602.js" as="script"><link rel="preload" href="/assets/js/21.efec8fa1.js" as="script"><link rel="prefetch" href="/assets/js/10.95e645d2.js"><link rel="prefetch" href="/assets/js/11.7a5bbaab.js"><link rel="prefetch" href="/assets/js/12.0bd756fe.js"><link rel="prefetch" href="/assets/js/13.c032609a.js"><link rel="prefetch" href="/assets/js/14.621e82f0.js"><link rel="prefetch" href="/assets/js/15.2bc7bb03.js"><link rel="prefetch" href="/assets/js/16.7b7424df.js"><link rel="prefetch" href="/assets/js/17.9a2f808e.js"><link rel="prefetch" href="/assets/js/18.2bb036cb.js"><link rel="prefetch" href="/assets/js/19.d8537971.js"><link rel="prefetch" href="/assets/js/20.c8e9e8fe.js"><link rel="prefetch" href="/assets/js/22.3385e6bf.js"><link rel="prefetch" href="/assets/js/23.a260f1cf.js"><link rel="prefetch" href="/assets/js/24.69037aca.js"><link rel="prefetch" href="/assets/js/25.ebc4667f.js"><link rel="prefetch" href="/assets/js/26.d355b386.js"><link rel="prefetch" href="/assets/js/27.8c327e12.js"><link rel="prefetch" href="/assets/js/28.98128502.js"><link rel="prefetch" href="/assets/js/29.b35b9692.js"><link rel="prefetch" href="/assets/js/3.efa71162.js"><link rel="prefetch" href="/assets/js/30.d28a8fd7.js"><link rel="prefetch" href="/assets/js/31.2eab1cab.js"><link rel="prefetch" href="/assets/js/32.0acbefde.js"><link rel="prefetch" href="/assets/js/33.35108fd8.js"><link rel="prefetch" href="/assets/js/34.bd1353df.js"><link rel="prefetch" href="/assets/js/4.2ab80d3e.js"><link rel="prefetch" href="/assets/js/5.b6c9c262.js"><link rel="prefetch" href="/assets/js/6.d1cbcbdc.js"><link rel="prefetch" href="/assets/js/7.7f87f0fb.js"><link rel="prefetch" href="/assets/js/8.97df5136.js"><link rel="prefetch" href="/assets/js/9.80311f25.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8a46e3d7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/wind.png" alt="元气Blog" class="logo"> <span class="site-name can-hide">元气Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/folder1/html.html" class="nav-link">
  文章
</a></li><li class="dropdown-item"><!----> <a href="/pages/folder2/test4.html" class="nav-link">
  随笔
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/qq974837057" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/folder1/html.html" class="nav-link">
  文章
</a></li><li class="dropdown-item"><!----> <a href="/pages/folder2/test4.html" class="nav-link">
  随笔
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/qq974837057" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/folder1/html.html" class="sidebar-link">HTML</a></li><li><a href="/pages/folder1/css.html" class="sidebar-link">CSS</a></li><li><a href="/pages/folder1/js.html" class="sidebar-link">JS</a></li><li><a href="/pages/folder1/ts.html" class="sidebar-link">TS</a></li><li><a href="/pages/folder1/browser.html" class="sidebar-link">HTTP与浏览器</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/folder1/security.html" class="sidebar-link">前端安全</a></li><li><a href="/pages/folder1/monitor.html" class="sidebar-link">监控体系</a></li><li><a href="/pages/folder1/performance.html" class="sidebar-link">性能优化</a></li><li><a href="/pages/folder1/design-pattern.html" class="sidebar-link">设计模式和架构</a></li><li><a href="/pages/folder1/refactor.html" class="sidebar-link">代码重构之道</a></li><li><a href="/pages/folder1/nodejs.html" class="sidebar-link">node与前沿</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/folder1/frame-common.html" class="sidebar-link">框架通识</a></li><li><a href="/pages/folder1/frame.html" class="sidebar-link">框架-Vue</a></li><li><a href="/pages/folder1/react.html" class="sidebar-link">框架-React</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>工程化和协作</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/folder1/webpack.html" class="sidebar-link">Webpack</a></li><li><a href="/pages/folder1/normalize.html" class="sidebar-link">前端规范</a></li><li><a href="/pages/folder1/git.html" aria-current="page" class="active sidebar-link">Git</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#git-flow-工作流" class="sidebar-link">Git flow 工作流</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#git-的区域" class="sidebar-link">Git 的区域</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#git-的基本使用场景" class="sidebar-link">Git 的基本使用场景</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#git-fetch" class="sidebar-link">git fetch</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#git-pull" class="sidebar-link">git pull</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#git-branch" class="sidebar-link">git branch</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#git-checkout" class="sidebar-link">git checkout</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#git-add" class="sidebar-link">git add</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#git-commit" class="sidebar-link">git commit</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#git-push" class="sidebar-link">git push</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#git-tag" class="sidebar-link">git tag</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#git-的进阶使用场景" class="sidebar-link">Git 的进阶使用场景</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#正常协作" class="sidebar-link">正常协作</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#代码合并" class="sidebar-link">代码合并</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#代码回退" class="sidebar-link">代码回退</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#挑拣代码" class="sidebar-link">挑拣代码</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#暂存代码" class="sidebar-link">暂存代码</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#打印日志" class="sidebar-link">打印日志</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/folder1/git.html#git-的下载、配置、工具推荐" class="sidebar-link">Git 的下载、配置、工具推荐</a></li></ul></li><li><a href="/pages/folder1/build.html" class="sidebar-link">构建</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>算法与编程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/folder1/algorithm-data.html" class="sidebar-link">数据结构和算法-概念</a></li><li><a href="/pages/folder1/algorithm-sort.html" class="sidebar-link">数据结构和算法-排序专题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><ul><li>参考<a href="https://www.liaoxuefeng.com/wiki/896043488029600/897013573512192" target="_blank" rel="noopener noreferrer">廖雪峰的 Git 教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="git-flow-工作流"><a href="#git-flow-工作流" class="header-anchor">#</a> Git flow 工作流</h2> <ul><li>两个长期分支
<ul><li>主分支 master:稳定的发布版（已发布代码）（一般有保护功能）</li> <li>主开发分支 develop:最新的开发代码</li></ul></li> <li>三个短期分支（用完该删除）
<ul><li>新功能分支 feature:开发新功能（由 develop 分支上面分出来，开发完并入 Develop）</li> <li>预发布分支 release:发布前的测试复查、版本控制、缺陷修复、（由 Develop 分支上面分出来，结束后并入 develop 和 master）</li> <li>补丁分支 hotfix:紧急修复 bug(issue 编号+名字)，从 master 上某个 tag 创建，修补结束，写上&quot;fixes #14&quot; 合并如 master 和 develop。</li></ul></li> <li>特点：
<ul><li>基于版本发布</li> <li>优点是清晰可控</li> <li>缺点是相对复杂，需要同时维护两个长期分支。</li> <li>Github flow 适合持续发布，只有一个长期分支就是 master</li> <li>GitLab flow 上游 master 优先，由 master 分出其他分支如 production，去发布版本。上游没问题，才合并到下游。</li></ul></li> <li>总流程
<ul><li>并行开发：新功能新建 feature 分支，开发完后合并到主开发分支 develop</li> <li>协作开发：从 develop 上创建新分支，即包括所有已完成的 feature</li> <li>预发布：develop 上创建一个 release 分支，发布到测试环境测试，有问题在此分支修复，修复完毕合并到 develop 和 master 分支。</li> <li>紧急修复：在已发布的 tag 上新建修复 hotfix 分支，修补结束合并如 master 和 develop。</li></ul></li> <li>tag
<ul><li>概念：对某个提交点打上标签，如发布版本后打 tag。</li> <li>作用：便于以后回滚特定版本，而不需要 revert。</li></ul></li></ul> <p><img src="/assets/img/Git-flow.631b95a8.png" alt="Git-flow"></p> <h2 id="git-的区域"><a href="#git-的区域" class="header-anchor">#</a> Git 的区域</h2> <p>画了一个简单的示意图，供大家参考</p> <p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e1e7850494c048c99132d4723a8281a7~tplv-k3u1fbpfcp-watermark.image" alt="yuque_diagram.jpg"></p> <ul><li>远程仓库（Remote）：在远程用于存放代码的服务器，远程仓库的内容能够被分布其他地方的本地仓库修改。</li> <li>本地仓库（Repository）：在自己电脑上的仓库，平时我们用 git commit 提交到暂存区，就会存入本地仓库。</li> <li>暂存区（Index）：执行 <code>git add</code> 后，工作区的文件就会被移入暂存区，表示哪些文件准备被提交，当完成某个功能后需要提交代码，可以通过 <code>git add</code> 先提交到暂存区。</li> <li>工作区（Workspace）：工作区，开发过程中，平时打代码的地方，看到是当前最新的修改内容。</li></ul> <h2 id="git-的基本使用场景"><a href="#git-的基本使用场景" class="header-anchor">#</a> Git 的基本使用场景</h2> <p>以下命令远程主机名默认为<code>origin</code>，如果有其他远程主机，将<code>origin</code>替换为其他即可。</p> <h3 id="git-fetch"><a href="#git-fetch" class="header-anchor">#</a> git fetch</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 获取远程仓库特定分支的更新</span>
<span class="token function">git</span> fetch origin <span class="token operator">&lt;</span>分支名<span class="token operator">&gt;</span>

<span class="token comment"># 获取远程仓库所有分支的更新</span>
<span class="token function">git</span> fetch --all
</code></pre></div><h3 id="git-pull"><a href="#git-pull" class="header-anchor">#</a> git pull</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 从远程仓库拉取代码，并合并到本地，相当于 git fetch &amp;&amp; git merge</span>
<span class="token function">git</span> pull origin <span class="token operator">&lt;</span>远程分支名<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>本地分支名<span class="token operator">&gt;</span>

<span class="token comment"># 拉取后，使用rebase的模式进行合并</span>
<span class="token function">git</span> pull --rebase origin <span class="token operator">&lt;</span>远程分支名<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>本地分支名<span class="token operator">&gt;</span>
</code></pre></div><p>注意</p> <ul><li>直接 git pull 不加任何选项，等价于<code>git fetch + git merge FETCH_HEAD</code>，执行效果就是会拉取所有分支信息回来，但是只合并当前分支的更改。其他分支的变更没有执行合并。</li> <li>使用 git pull --rebase 可以减少冲突的提交点，比如我本地已经提交，但是远程其他同事也有新的代码提交记录，此时拉取远端其他同事的代码，如果是 merge 的形式，就会有一个 merge 的 commit 记录。如果用 rebase，就不会产生该合并记录，是将我们的提交点挪到其他同事的提交点之后。</li></ul> <h3 id="git-branch"><a href="#git-branch" class="header-anchor">#</a> git branch</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 基于当前分支，新建一个本地分支，但不切换</span>
<span class="token function">git</span> branch <span class="token operator">&lt;</span>branch-name<span class="token operator">&gt;</span>

<span class="token comment"># 查看本地分支</span>
<span class="token function">git</span> branch

<span class="token comment"># 查看远程分支</span>
<span class="token function">git</span> branch -r

<span class="token comment"># 查看本地和远程分支</span>
<span class="token function">git</span> branch -a

<span class="token comment"># 删除本地分支</span>
<span class="token function">git</span> branch -D <span class="token operator">&lt;</span>branch-name<span class="token operator">&gt;</span>

<span class="token comment"># 基于旧分支创建一个新分支</span>
<span class="token function">git</span> branch <span class="token operator">&lt;</span>new-branch-name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>old-branch-name<span class="token operator">&gt;</span>

<span class="token comment"># 基于某提交点创建一个新分支</span>
<span class="token function">git</span> branch <span class="token operator">&lt;</span>new-branch-name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>commit-id<span class="token operator">&gt;</span>

<span class="token comment"># 重新命名分支</span>
<span class="token function">git</span> branch -m <span class="token operator">&lt;</span>old-branch-name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>new-branch-name<span class="token operator">&gt;</span>
</code></pre></div><h3 id="git-checkout"><a href="#git-checkout" class="header-anchor">#</a> git checkout</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 切换到某个分支上</span>
<span class="token function">git</span> checkout <span class="token operator">&lt;</span>branch-name<span class="token operator">&gt;</span>

<span class="token comment"># 基于当前分支，创建一个分支并切换到新分支上</span>
<span class="token function">git</span> checkout -b <span class="token operator">&lt;</span>branch-name<span class="token operator">&gt;</span>
</code></pre></div><h3 id="git-add"><a href="#git-add" class="header-anchor">#</a> git add</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 添把当前工作区修改的文件添加到暂存区，多个文件可以用空格隔开</span>
<span class="token function">git</span> <span class="token function">add</span> xxx

<span class="token comment"># 添加当前工作区修改的所有文件到暂存区</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
</code></pre></div><h3 id="git-commit"><a href="#git-commit" class="header-anchor">#</a> git commit</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 提交暂存区中的所有文件，并写下提交的概要信息</span>
<span class="token function">git</span> commit -m <span class="token string">&quot;message&quot;</span>

<span class="token comment"># 相等于 git add . &amp;&amp; git commit -m</span>
<span class="token function">git</span> commit -am

<span class="token comment"># 对最近一次的提交的信息进行修改，此操作会修改commit的hash值</span>
<span class="token function">git</span> commit --amend
</code></pre></div><h3 id="git-push"><a href="#git-push" class="header-anchor">#</a> git push</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 推送提交到远程仓库</span>
<span class="token function">git</span> push

<span class="token comment"># 强行推送到远程仓库</span>
<span class="token function">git</span> push -f
</code></pre></div><h3 id="git-tag"><a href="#git-tag" class="header-anchor">#</a> git tag</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 查看所有已打上的标签</span>
<span class="token function">git</span> tag

<span class="token comment"># 新增一个标签打在当前提交点上，并写上标签信息</span>
<span class="token function">git</span> tag -a <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span> -m <span class="token string">'message'</span>

<span class="token comment"># 为指定提交点打上标签</span>
<span class="token function">git</span> tag -a <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>commit-id<span class="token operator">&gt;</span>

<span class="token comment"># 删除指定标签</span>
<span class="token function">git</span> tag -d <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>
</code></pre></div><h2 id="git-的进阶使用场景"><a href="#git-的进阶使用场景" class="header-anchor">#</a> Git 的进阶使用场景</h2> <blockquote><p>HEAD 表示最新提交 ；HEAD^表示上一次； HEAD~n 表示第 n 次（从 0 开始，表示最近一次）</p></blockquote> <h3 id="正常协作"><a href="#正常协作" class="header-anchor">#</a> 正常协作</h3> <ul><li><code>git pull</code> 拉取远程仓库的最新代码</li> <li>工作区修改代码，完成功能开发</li> <li><code>git add .</code> 添加修改的文件到暂存区</li> <li><code>git commit -m 'message'</code> 提交到本地仓库</li> <li><code>git push</code>将本地仓库的修改推送到远程仓库</li></ul> <h3 id="代码合并"><a href="#代码合并" class="header-anchor">#</a> 代码合并</h3> <h4 id="git-merge"><a href="#git-merge" class="header-anchor">#</a> git merge</h4> <p>自动创建一个新的合并提交点<code>merge-commit</code>，且包含两个分支记录。如果合并的时候遇到冲突，仅需要修改解决冲突后，重新 commit。</p> <ul><li>场景：如<strong>dev 要合并进主分支 master</strong>，保留详细的合并信息</li> <li>优点：展示真实的 commit 情况</li> <li>缺点：分支杂乱</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> checkout master
<span class="token function">git</span> merge dev
</code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/25dbbe263dc9400b9c51ede7ca85632f~tplv-k3u1fbpfcp-zoom-1.image" alt="rf1o2b6eduboqwkigg3w.gif"></p> <h4 id="git-merge-的几种模式"><a href="#git-merge-的几种模式" class="header-anchor">#</a> git merge 的几种模式</h4> <ul><li><code>git merge --ff</code> （默认--ff,fast-farward）
<ul><li>结果：被 merge 的分支和当前分支在图形上并为一条线，被 merge 的提交点 commit 合并到当前分支，没有新的提交点 merge</li> <li>缺点：代码合并不冲突时，默认快速合并，主分支按时间顺序混入其他分支的零碎 commit 点。而且删除分支，会丢失分支信息。</li></ul></li> <li><code>git merge --no-ff</code>（不快速合并、推荐）
<ul><li>结果：被 merge 的分支和当前分支不在一条线上，被 merge 的提交点 commit 还在原来的分支上，并在当前分支产生一个新提交点 merge</li> <li>优点：代码合并产生冲突就会走这个模式，利于回滚整个大版本(主分支自己的 commit 点)</li></ul></li> <li><code>git merge --squash</code>（把多次分支 commit 历史压缩为一次）
<ul><li>结果：把多次分支 commit 历史压缩为一次</li></ul></li></ul> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/70ab71b89bb74c248b8b7098383a04e0~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></p> <h4 id="git-rebase"><a href="#git-rebase" class="header-anchor">#</a> git rebase</h4> <ul><li>不产生<code>merge commit</code>，变换起始点位置，“整理”成一条直线，且能使用命令合并多次 commit。</li> <li>如在 develop 上<code>git rebase master</code> 就会拉取到 master 上的最新代码合并进来，也就是将分支的起始时间指向 master 上最新的 commit 上。自动保留的最新近的修改，不会遇到合并冲突。而且可交互操作（执行合并删除 commit），可通过交互式变基来合并分支之前的 commit 历史<code>git rebase -i HEAD~3</code></li> <li>场景：主要<strong>发生在个人分支</strong>上，如 <code>git rebase master</code>整理自己的 dev 变成一条线。频繁进行了 git commit 提交，可用交互操作<code>drop</code>删除一些提交，<code>squash</code>提交融合前一个提交中。</li> <li>优点：简洁的提交历史</li> <li>缺点：发生错误难定位，解决冲突比较繁琐，要一个一个解决。</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> checkout dev
<span class="token function">git</span> rebase master
</code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/66b9c66445c44aee91a5587b887a8e27~tplv-k3u1fbpfcp-zoom-1.image" alt="dwyukhq8yj2xliq4i50e.gif"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c4b1de83531a41c38983ce025d356843~tplv-k3u1fbpfcp-zoom-1.image" alt="msofpv7k6rcmpaaefscm.gif"></p> <h4 id="git-merge-和-git-rebase-的区别"><a href="#git-merge-和-git-rebase-的区别" class="header-anchor">#</a> git merge 和 git rebase 的区别</h4> <ul><li>merge 会保留两个分支的 commit 信息，而且是交叉着的，即使是 ff 模式，两个分支的 commit 信息会混合在一起（按真实提交时间排序），多用于自己 dev 合并进 master。</li> <li>rebase 意思是变基，改变分支的起始位置，在 dev 上<code>git rebase master</code>，将 dev 的多次 commit 一起拉到要 master 最新提交的后面(时间最新)，变成一条线，多用于整理自己的 dev 提交历史，然后把 master 最新代码合进来。</li> <li>使用 rebase 还是 merge 更多的是管理风格的问题，有个较好实践：
<ul><li>就是 dev 在 merge 进主分支（如 master）之前，最好在自己的 dev 分支上，执行 rebase master 主分支，然后用 pull request 或 MR 创建普通 merge 请求。</li> <li>用 rebase 整理成重写 commit 历史，所有修改拉到 master 的最新修改前面，保证 dev 运行在当前最新的主 branch 的代码。避免了 git 历史提交里无意义的交织。</li></ul></li> <li>假设场景：从 dev 拉出分支 feature-a。
<ul><li>那么当 dev 要合并 feature-a 的内容时，使用 <code>git merge feature-a</code></li> <li>反过来当 feature-a 要更新 dev 的内容时，使用 <code>git rebase dev</code></li></ul></li> <li>git merge 和 git rebase 两者对比图
<ul><li>git merge 图示 <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/857ac736dd8146dca76e89cad23c7c22~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></li> <li>git rebase 图示 <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/da1899fbaf6e4a9295e3e6540ce5d6af~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></li></ul></li></ul> <h4 id="取消合并"><a href="#取消合并" class="header-anchor">#</a> 取消合并</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 取消merge合并</span>
<span class="token function">git</span> merge --abort
<span class="token comment"># 取消rebase合并</span>
<span class="token function">git</span> rebase --abort
</code></pre></div><h3 id="代码回退"><a href="#代码回退" class="header-anchor">#</a> 代码回退</h3> <h4 id="代码回退的几种方式"><a href="#代码回退的几种方式" class="header-anchor">#</a> 代码回退的几种方式</h4> <ul><li><code>git checkout</code></li> <li><code>git reset</code> <ul><li><code>--hard</code>：硬重置，影响【工作区、暂存区、本地仓库】</li> <li><code>--mixed</code>：默认，影响【暂存区、本地仓库】，被重置的修改内容还留在工作区</li> <li><code>--soft</code>：软重置，影响 【本地仓库】，被重置的修改内容还留在工作区和暂存区</li></ul></li> <li><code>git revert</code></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 撤回工作区该文件的修改，多个文件用空格隔开</span>
<span class="token function">git</span> checkout -- <span class="token operator">&lt;</span>file-name<span class="token operator">&gt;</span>
<span class="token comment"># 撤回工作区所有改动</span>
<span class="token function">git</span> checkout <span class="token builtin class-name">.</span>

<span class="token comment"># 放弃已git add到暂存区的指定文件的缓存（HEAD表示最新版本）</span>
<span class="token function">git</span> reset HEAD <span class="token operator">&lt;</span>file-name<span class="token operator">&gt;</span>
<span class="token comment"># 放弃所有的缓存</span>
<span class="token function">git</span> reset HEAD <span class="token builtin class-name">.</span>
<span class="token comment"># 丢弃已commit的其他版本，hard参数表示同时重置工作区的修改</span>
<span class="token function">git</span> reset --hard <span class="token operator">&lt;</span>commit-id<span class="token operator">&gt;</span>
<span class="token comment"># 回到上一个commit的版本，hard参数表示同时重置工作区的修改</span>
<span class="token function">git</span> reset --hard HEAD^

<span class="token comment"># 撤销0ffaacc这次提交</span>
<span class="token function">git</span> revert 0ffaacc
<span class="token comment"># 撤销最近一次提交</span>
<span class="token function">git</span> revert HEAD
<span class="token comment"># 撤销最近2次提交，注意：数字从0开始</span>
<span class="token function">git</span> revert HEAD~1

<span class="token comment"># 回退后要执行强制推送远程分支</span>
<span class="token function">git</span> push -f
</code></pre></div><h4 id="git-reset-和-git-revert-的区别"><a href="#git-reset-和-git-revert-的区别" class="header-anchor">#</a> git reset 和 git revert 的区别</h4> <ul><li>reset 是根据<commit-id>来移动 HEAD 指针，在该次提交点后面的提交记录会丢失。
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dbdf4d8c134640e6b8e97c34ceee4d07~tplv-k3u1fbpfcp-zoom-1.image" alt="hlh0kowt3hov1xhcku38.gif"></commit-id></li> <li>revert 会产生新的提交，来抵消选中的该次提交的修改内容，可以理解为“反做”，不会丢失中间的提交记录。
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e68ae4f29e6c4347a0c1c85d9a79dfe9~tplv-k3u1fbpfcp-zoom-1.image" alt="3kkd2ahn41zixs12xgpf.gif"></li> <li>使用建议
<ul><li>公共分支回退使用 git revert，避免丢掉其他同事的提交。</li> <li>自己分支回退可使用 git reset，也可以使用 git revert，按需使用。</li></ul></li></ul> <h3 id="挑拣代码"><a href="#挑拣代码" class="header-anchor">#</a> 挑拣代码</h3> <p><code>git cherry-pick</code></p> <ul><li>“挑拣”提交，单独抽取某个分支的一个提交点，将这个提交点的所有修改内容，搬运到你的当前分支。</li> <li>如果我们只想将其他分支的某个提交点合并进来，不想用<code>git merge</code>将所有提交点合并进来，就需要使用这个<code>git cherry-pick</code>。</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> cherry-pick <span class="token operator">&lt;</span>commit-id<span class="token operator">&gt;</span>
</code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a3947957a9140c9a49944b80a6206af~tplv-k3u1fbpfcp-zoom-1.image" alt="2dkjx4yeaal10xyvj29v.gif"></p> <h3 id="暂存代码"><a href="#暂存代码" class="header-anchor">#</a> 暂存代码</h3> <p><code>git stash</code></p> <ul><li>当我们想要切换去其他分支修复 bug，此时当前的功能代码还没修改完整，不想 commit，就需要暂存当前修改的文件，然后切换到 hotfix 分支修复 bug，修复完成再切换回来，将暂存的修改提取出来，继续功能开发。</li> <li>还有另一种场景就是，同事在远程分支上推送了代码，此时拉下来有冲突，可以将我们自己的修改 stash 暂存起来，然后先拉最新的提交代码，再 pop 出来，这样可以避免一个冲突的提交点。</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 将本地改动的暂存起来</span>
<span class="token function">git</span> stash
<span class="token comment"># 将未跟踪的文件暂存（另一种方式是先将新增的文件添加到暂存区，使其被git跟踪，就可以直接git stash）</span>
<span class="token function">git</span> stash -u
<span class="token comment"># 添加本次暂存的备注，方便查找。</span>
<span class="token function">git</span> stash save <span class="token string">&quot;message&quot;</span>
<span class="token comment"># 应用暂存的更改</span>
<span class="token function">git</span> stash apply
<span class="token comment"># 删除暂存</span>
<span class="token function">git</span> stash drop
<span class="token comment"># 应用暂存的更改，然后删除该暂存，等价于git stash apply + git stash drop</span>
<span class="token function">git</span> stash pop
<span class="token comment"># 删除所有缓存</span>
<span class="token function">git</span> stash <span class="token function">clear</span>
<span class="token comment"># 查看缓存列表</span>
<span class="token function">git</span> stash list
</code></pre></div><h3 id="打印日志"><a href="#打印日志" class="header-anchor">#</a> 打印日志</h3> <ol><li>​<code>git log</code></li></ol> <p>可以显示所有提交过的版本信息，如果感觉太繁琐，可以加上参数  <code>--pretty=oneline</code>，只会显示版本号和提交时的备注信息。</p> <ol start="2"><li>​<code>git reflog</code></li></ol> <p>​<code>git reflog</code>  可以查看所有分支的所有操作记录（包括已经被删除的 commit 记录和 reset 的操作），例如执行 <code>git reset --hard HEAD~1</code>，退回到上一个版本，用 git log 是看不出来被删除的<commit-id>，用<code>git reflog</code>则可以看到被删除的<commit-id>，我们就可以买后悔药，恢复到被删除的那个版本。</commit-id></commit-id></p> <h2 id="git-的下载、配置、工具推荐"><a href="#git-的下载、配置、工具推荐" class="header-anchor">#</a> Git 的下载、配置、工具推荐</h2> <ul><li>Git 下载地址
<ul><li><a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer">https://git-scm.com/downloads<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>两种拉取代码的方式
<ul><li>https：每次都要手动输入用户名和密码</li> <li>ssh ：自动使用本地私钥+远程的公钥验证是否为一对秘钥</li></ul></li> <li>配置 ssh
<ul><li><code>ssh-keygen -t rsa -C &quot;邮箱地址&quot;</code></li> <li><code>cd ~/.ssh</code>切换到 home 下面的 ssh 目录、<code>cat id_rsa.pub</code>命令查看公钥的内容，然后复制</li> <li>github 的<code>settings</code> -&gt; <code>SSH and GPG keys</code>-&gt; 复制刚才的内容贴入 -&gt; <code>Add SSH key</code></li> <li>全局配置一下 Git 用户名和邮箱
<ul><li><code>git config --global user.name &quot;xxx&quot;</code></li> <li><code>git config --global user.email &quot;xxx@xx.com&quot;</code></li> <li><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7d071e482abf42eabd3be08da8b655eb~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></li></ul></li></ul></li> <li>Git 相关工具推荐
<ul><li>图形化工具<a href="https://www.sourcetreeapp.com/" target="_blank" rel="noopener noreferrer"> SourceTree <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：可视化执行 git 命令，解放双手</li> <li>VSCode 插件 <a href="https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens" target="_blank" rel="noopener noreferrer">GitLens<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：可以在每行代码查看对应 git 的提交信息，而且提供每个提交点的差异对比</li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/pages/folder1/normalize.html" class="prev">
        前端规范
      </a></span> <span class="next"><a href="/pages/folder1/build.html">
        构建
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d50c72b0.js" defer></script><script src="/assets/js/2.7285e602.js" defer></script><script src="/assets/js/21.efec8fa1.js" defer></script>
  </body>
</html>
